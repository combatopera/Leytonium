#!/bin/bash

#HALP Merge master into all PRs and carrion.

set -ex

. git_functions

prefix=$(githubuser)-

function mergeone {
    git checkout $1
    git merge --no-edit master
}

function mergethem {
    for b in $(publicbranches); do
        [[ $b != $prefix* ]] || mergeone $b
    done
    for b in $(allbranches); do
        [[ $b != carrion-* && $b != controversial-* ]] || mergeone $b
    done
}

nicely mergethem
