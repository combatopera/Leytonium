#!/bin/bash

#HALP Pull master with automatic stash and switch.

set -ex

function nicely {
    local stashed="$(git stash)"
    local branch="$(git rev-parse --abbrev-ref HEAD)"
    "$@"
    git checkout "$branch"
    [[ 'No local changes to save' = "$stashed" ]] || git stash pop
}

function pullmaster {
    git checkout master
    git pull
}

nicely pullmaster
